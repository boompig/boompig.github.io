import{$ as e,B as t,C as n,D as r,E as i,H as a,I as o,J as s,L as c,M as l,N as u,O as d,Q as f,R as p,S as m,T as h,V as g,Z as _,b as v,d as y,f as b,g as x,h as S,i as C,m as w,p as T,q as E,u as D,v as O,w as k,x as A,z as j}from"../chunks/D-A9m1yF.js";import"../chunks/DJBcNWQg.js";function M(t,r){let i=C(r,`variant`,3,`primary`),a=C(r,`size`,3,`medium`),o=C(r,`disabled`,3,!1),s=C(r,`href`,3,void 0),c=C(r,`type`,3,`button`),l=C(r,`onclick`,3,void 0),u=s()?`a`:`button`;var d=n();x(p(d),()=>u,!1,(t,u)=>{y(t,()=>({href:s(),disabled:o(),type:c(),class:`btn btn-${i()??``} btn-${a()??``}`,onclick:l()}),void 0,void 0,void 0,`svelte-118lylz`);var d=n();O(p(d),()=>r.children??e),m(u,d)}),m(t,d)}var N=k(`<label class="input-label svelte-1tqly6n"> </label>`),P=k(`<span class="error-message svelte-1tqly6n"> </span>`),F=k(`<!> <div><input class="svelte-1tqly6n"/></div> <!>`,1);function I(e,n){s(n,!0);let i=C(n,`type`,3,`text`),a=C(n,`placeholder`,3,``),o=C(n,`value`,15,``),l=C(n,`disabled`,3,!1),h=C(n,`required`,3,!1),_=C(n,`id`,3,``),y=C(n,`name`,3,``),x=C(n,`variant`,3,`default`),S=C(n,`size`,3,`medium`),O=C(n,`label`,3,``),k=C(n,`error`,3,``),M=C(n,`oninput`,3,void 0),I=C(n,`onchange`,3,void 0),L=C(n,`onkeydown`,3,void 0),R=g(!1);var z=F(),B=p(z),V=e=>{var t=N(),n=c(t,!0);f(t),u(()=>{T(t,`for`,_()),A(n,O())}),m(e,t)};v(B,e=>{O()&&e(V)});var H=j(B,2);let U;var W=c(H);b(W),W.__input=function(...e){M()?.apply(this,e)},W.__change=function(...e){I()?.apply(this,e)},W.__keydown=function(...e){L()?.apply(this,e)},f(H);var G=j(H,2),K=e=>{var t=P(),n=c(t,!0);f(t),u(()=>A(n,k())),m(e,t)};v(G,e=>{k()&&e(K)}),u(()=>{U=w(H,1,`input-wrapper input-${x()??``} input-${S()??``}`,`svelte-1tqly6n`,U,{focused:d(R),error:k()}),T(W,`type`,i()),T(W,`placeholder`,a()),W.disabled=l(),W.required=h(),T(W,`id`,_()),T(W,`name`,y())}),r(`focus`,W,()=>t(R,!0)),r(`blur`,W,()=>t(R,!1)),D(W,o),m(e,z),E()}i([`input`,`change`,`keydown`]);var L=k(`<div class="result-section svelte-ea1rij"><h3 class="svelte-ea1rij">Encryption Result</h3> <pre class="encrypted-output svelte-ea1rij"> </pre></div>`);function R(e,t){let r=C(t,`result`,3,``);var i=n(),a=p(i),o=e=>{var t=L(),n=j(c(t),2),i=c(n,!0);f(n),f(t),u(()=>A(i,r())),m(e,t)};v(a,e=>{r()&&e(o)}),m(e,i)}var z=k(`<div class="url-actions svelte-1l8ukcd"><!> <p class="url-note svelte-1l8ukcd">Copy URL to share encryption data for decryption</p></div>`),B=k(`<section class="encrypt-section svelte-1l8ukcd"><h2 class="svelte-1l8ukcd">Encrypt Name</h2> <form class="svelte-1l8ukcd"><!> <!></form> <!> <!></section>`),V=k(`<div class="decrypted-result svelte-1l8ukcd"><h3 class="svelte-1l8ukcd">Decrypted Name</h3> <div class="name-output svelte-1l8ukcd"> </div></div>`),H=k(`<h1>Secret Santa 2025</h1> <p>Santa is a secret agent.</p> <!> <section class="decrypt-section svelte-1l8ukcd"><h2 class="svelte-1l8ukcd">Decrypt Name</h2> <form class="svelte-1l8ukcd"><!> <!> <!> <!></form> <!></section>`,1);function U(e,n){s(n,!0);let i=g(``),y=g(``),b=g(!1),x=g(``),C=g(``),w=g(``),T=g(``),D=g(``),O=g(!1),k=g(``),N=g(null),P=g(!1),F=g(!1);async function L(){return await crypto.subtle.generateKey({name:`AES-GCM`,length:128},!0,[`encrypt`,`decrypt`])}function U(e){return new TextEncoder().encode(e)}function W(e){let t=new Uint8Array(e),n=``;for(let e=0;e<t.byteLength;e++)n+=String.fromCharCode(t[e]);return btoa(n)}async function G(){if(!d(i).trim()){t(x,`Please enter a name to encrypt`);return}try{t(b,!0),t(x,``);let e=await L(),n=crypto.getRandomValues(new Uint8Array(12)),r=await crypto.subtle.encrypt({name:`AES-GCM`,iv:n},e,U(d(i))),a=await crypto.subtle.exportKey(`raw`,e);t(N,{ct:W(r),key:W(a),iv:W(n.buffer)},!0),t(y,JSON.stringify(d(N),null,2),!0)}catch(e){t(x,`Encryption failed: ${e instanceof Error?e.message:String(e)}`),t(y,``)}finally{t(b,!1)}}function K(e){let t=atob(e),n=new Uint8Array(t.length);for(let e=0;e<t.length;e++)n[e]=t.charCodeAt(e);return n.buffer}function ee(e){return new TextDecoder().decode(e)}async function te(){if(!d(C).trim()||!d(w).trim()||!d(T).trim()){t(k,`Please fill in all decryption fields`);return}try{t(O,!0),t(k,``);let e=K(d(w)),n=K(d(C)),r=K(d(T)),i=await crypto.subtle.importKey(`raw`,e,{name:`AES-GCM`},!1,[`decrypt`]);t(D,ee(await crypto.subtle.decrypt({name:`AES-GCM`,iv:r},i,n)),!0)}catch(e){t(k,`Decryption failed: ${e instanceof Error?e.message:String(e)}`),t(D,``)}finally{t(O,!1)}}function ne(e){e.preventDefault(),G()}function re(e){e.preventDefault(),te()}async function ie(){if(d(N))try{t(P,!0);let e=new URL(window.location.href);e.searchParams.set(`op`,`d`),e.searchParams.set(`ct`,d(N).ct),e.searchParams.set(`key`,d(N).key),e.searchParams.set(`iv`,d(N).iv),await navigator.clipboard.writeText(e.toString()),setTimeout(()=>{t(P,!1)},1e3)}catch(e){console.error(`Failed to copy URL:`,e),t(P,!1)}}function ae(){if(typeof window>`u`)return;let e=new URL(window.location.href),n=e.searchParams.get(`op`),r=e.searchParams.get(`ct`),i=e.searchParams.get(`key`),a=e.searchParams.get(`iv`);n===`d`&&t(F,!0),r&&i&&a&&(t(C,r,!0),t(w,i,!0),t(T,a,!0))}typeof window<`u`&&ae();var q=H();S(`1l8ukcd`,e=>{l(()=>{o.title=`Secret Santa 2025 | kats.coffee`})});var J=j(p(q),4),oe=e=>{var n=B(),o=j(c(n),2),s=c(o);I(s,{placeholder:`Enter your name`,required:!0,get error(){return d(x)},get value(){return d(i)},set value(e){t(i,e,!0)}});var l=j(s,2);{let e=a(()=>d(b)||!d(i).trim());M(l,{type:`submit`,variant:`primary`,get disabled(){return d(e)},children:(e,t)=>{_();var n=h();u(()=>A(n,d(b)?`Encrypting...`:`Encrypt`)),m(e,n)},$$slots:{default:!0}})}f(o);var p=j(o,2);R(p,{get result(){return d(y)}});var g=j(p,2),S=e=>{var t=z();M(c(t),{variant:`accent`,size:`small`,onclick:ie,get disabled(){return d(P)},children:(e,t)=>{_();var n=h();u(()=>A(n,d(P)?`Copied!`:`Copy to URL`)),m(e,n)},$$slots:{default:!0}}),_(2),f(t),m(e,t)};v(g,e=>{d(N)&&e(S)}),f(n),r(`submit`,o,ne),m(e,n)};v(J,e=>{d(F)||e(oe)});var Y=j(J,2),X=j(c(Y),2),Z=c(X);I(Z,{placeholder:`Enter encrypted text (base64)`,required:!0,get error(){return d(k)},get value(){return d(C)},set value(e){t(C,e,!0)}});var Q=j(Z,2);I(Q,{placeholder:`Enter key (base64)`,required:!0,get value(){return d(w)},set value(e){t(w,e,!0)}});var $=j(Q,2);I($,{placeholder:`Enter IV (base64)`,required:!0,get value(){return d(T)},set value(e){t(T,e,!0)}});var se=j($,2);{let e=a(()=>d(O)||!d(C).trim()||!d(w).trim()||!d(T).trim());M(se,{type:`submit`,variant:`secondary`,get disabled(){return d(e)},children:(e,t)=>{_();var n=h();u(()=>A(n,d(O)?`Decrypting...`:`Decrypt`)),m(e,n)},$$slots:{default:!0}})}f(X);var ce=j(X,2),le=e=>{var t=V(),n=j(c(t),2),r=c(n,!0);f(n),f(t),u(()=>A(r,d(D))),m(e,t)};v(ce,e=>{d(D)&&e(le)}),f(Y),r(`submit`,X,re),m(e,q),E()}export{U as component};