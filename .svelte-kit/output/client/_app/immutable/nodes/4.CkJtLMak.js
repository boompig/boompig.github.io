import{B as e,C as t,D as n,E as r,F as i,I as a,K as o,L as s,M as c,Q as l,R as u,S as d,T as f,V as p,X as m,Z as h,_ as g,b as _,d as v,f as y,h as b,i as x,j as S,l as C,m as w,p as T,q as E,u as D,w as O,x as k,y as A,z as j}from"../chunks/DM3zpvUY.js";import"../chunks/BLbzM2CZ.js";function M(e,t){let n=x(t,`variant`,3,`primary`),r=x(t,`size`,3,`medium`),i=x(t,`disabled`,3,!1),a=x(t,`href`,3,void 0),o=x(t,`type`,3,`button`),c=x(t,`onclick`,3,void 0),u=a()?`a`:`button`;var f=d();b(s(f),()=>u,!1,(e,u)=>{D(e,()=>({href:a(),disabled:i(),type:o(),class:`btn btn-${n()??``} btn-${r()??``}`,onclick:c()}),void 0,void 0,void 0,`svelte-118lylz`);var f=d();g(s(f),()=>t.children??l),k(u,f)}),k(e,f)}var N=t(`<label class="input-label svelte-1tqly6n"> </label>`),P=t(`<span class="error-message svelte-1tqly6n"> </span>`),F=t(`<!> <div><input class="svelte-1tqly6n"/></div> <!>`,1);function I(t,i){E(i,!0);let l=x(i,`type`,3,`text`),d=x(i,`placeholder`,3,``),f=x(i,`value`,15,``),p=x(i,`disabled`,3,!1),m=x(i,`required`,3,!1),g=x(i,`id`,3,``),b=x(i,`name`,3,``),S=x(i,`variant`,3,`default`),w=x(i,`size`,3,`medium`),D=x(i,`label`,3,``),O=x(i,`error`,3,``),M=x(i,`oninput`,3,void 0),I=x(i,`onchange`,3,void 0),L=x(i,`onkeydown`,3,void 0),R=e(!1);var z=F(),B=s(z),V=e=>{var t=N(),n=a(t,!0);h(t),c(()=>{y(t,`for`,g()),_(n,D())}),k(e,t)};A(B,e=>{D()&&e(V)});var H=u(B,2);let U;var W=a(H);v(W),W.__input=function(...e){M()?.apply(this,e)},W.__change=function(...e){I()?.apply(this,e)},W.__keydown=function(...e){L()?.apply(this,e)},h(H);var G=u(H,2),K=e=>{var t=P(),n=a(t,!0);h(t),c(()=>_(n,O())),k(e,t)};A(G,e=>{O()&&e(K)}),c(()=>{U=T(H,1,`input-wrapper input-${S()??``} input-${w()??``}`,`svelte-1tqly6n`,U,{focused:n(R),error:O()}),y(W,`type`,l()),y(W,`placeholder`,d()),W.disabled=p(),W.required=m(),y(W,`id`,g()),y(W,`name`,b())}),r(`focus`,W,()=>j(R,!0)),r(`blur`,W,()=>j(R,!1)),C(W,f),k(t,z),o()}f([`input`,`change`,`keydown`]);var L=t(`<div class="result-section svelte-ea1rij"><h3 class="svelte-ea1rij">Encryption Result</h3> <pre class="encrypted-output svelte-ea1rij"> </pre></div>`);function R(e,t){let n=x(t,`result`,3,``);var r=d(),i=s(r),o=e=>{var t=L(),r=u(a(t),2),i=a(r,!0);h(r),h(t),c(()=>_(i,n())),k(e,t)};A(i,e=>{n()&&e(o)}),k(e,r)}var z=t(`<div class="url-actions svelte-1l8ukcd"><!> <p class="url-note svelte-1l8ukcd">Copy URL to share encryption data for decryption</p></div>`),B=t(`<section class="encrypt-section svelte-1l8ukcd"><h2 class="svelte-1l8ukcd">Encrypt Name</h2> <form class="svelte-1l8ukcd"><!> <!></form> <!> <!></section>`),V=t(`<div class="decrypted-result svelte-1l8ukcd"><h3 class="svelte-1l8ukcd">Decrypted Name</h3> <div class="name-output svelte-1l8ukcd"> </div></div>`),H=t(`<h1>Secret Santa 2025</h1> <p>Santa is a secret agent.</p> <!> <section class="decrypt-section svelte-1l8ukcd"><h2 class="svelte-1l8ukcd">Decrypt Name</h2> <form class="svelte-1l8ukcd"><!> <!> <!> <!></form> <!></section>`,1);function U(t,l){E(l,!0);let d=e(``),f=e(``),g=e(!1),v=e(``),y=e(``),b=e(``),x=e(``),C=e(``),T=e(!1),D=e(``),N=e(null),P=e(!1),F=e(!1);async function L(){return await crypto.subtle.generateKey({name:`AES-GCM`,length:128},!0,[`encrypt`,`decrypt`])}function U(e){return new TextEncoder().encode(e)}function W(e){let t=new Uint8Array(e),n=``;for(let e=0;e<t.byteLength;e++)n+=String.fromCharCode(t[e]);return btoa(n)}async function G(){if(!n(d).trim()){j(v,`Please enter a name to encrypt`);return}try{j(g,!0),j(v,``);let e=await L(),t=crypto.getRandomValues(new Uint8Array(12)),r=await crypto.subtle.encrypt({name:`AES-GCM`,iv:t},e,U(n(d))),i=await crypto.subtle.exportKey(`raw`,e);j(N,{ct:W(r),key:W(i),iv:W(t.buffer)},!0),j(f,JSON.stringify(n(N),null,2),!0)}catch(e){j(v,`Encryption failed: ${e instanceof Error?e.message:String(e)}`),j(f,``)}finally{j(g,!1)}}function K(e){let t=atob(e),n=new Uint8Array(t.length);for(let e=0;e<t.length;e++)n[e]=t.charCodeAt(e);return n.buffer}function ee(e){return new TextDecoder().decode(e)}async function te(){if(!n(y).trim()||!n(b).trim()||!n(x).trim()){j(D,`Please fill in all decryption fields`);return}try{j(T,!0),j(D,``);let e=K(n(b)),t=K(n(y)),r=K(n(x)),i=await crypto.subtle.importKey(`raw`,e,{name:`AES-GCM`},!1,[`decrypt`]);j(C,ee(await crypto.subtle.decrypt({name:`AES-GCM`,iv:r},i,t)),!0)}catch(e){j(D,`Decryption failed: ${e instanceof Error?e.message:String(e)}`),j(C,``)}finally{j(T,!1)}}function ne(e){e.preventDefault(),G()}function re(e){e.preventDefault(),te()}async function ie(){if(n(N))try{j(P,!0);let e=new URL(window.location.href);e.searchParams.set(`op`,`d`),e.searchParams.set(`ct`,n(N).ct),e.searchParams.set(`key`,n(N).key),e.searchParams.set(`iv`,n(N).iv),await navigator.clipboard.writeText(e.toString()),setTimeout(()=>{j(P,!1)},1e3)}catch(e){console.error(`Failed to copy URL:`,e),j(P,!1)}}function ae(){if(typeof window>`u`)return;let e=new URL(window.location.href),t=e.searchParams.get(`op`),n=e.searchParams.get(`ct`),r=e.searchParams.get(`key`),i=e.searchParams.get(`iv`);t===`d`&&j(F,!0),n&&r&&i&&(j(y,n,!0),j(b,r,!0),j(x,i,!0))}typeof window<`u`&&ae();var q=H();w(`1l8ukcd`,e=>{S(()=>{i.title=`Secret Santa 2025 | kats.coffee`})});var J=u(s(q),4),oe=e=>{var t=B(),i=u(a(t),2),o=a(i);I(o,{placeholder:`Enter your name`,required:!0,get error(){return n(v)},get value(){return n(d)},set value(e){j(d,e,!0)}});var s=u(o,2);{let e=p(()=>n(g)||!n(d).trim());M(s,{type:`submit`,variant:`primary`,get disabled(){return n(e)},children:(e,t)=>{m();var r=O();c(()=>_(r,n(g)?`Encrypting...`:`Encrypt`)),k(e,r)},$$slots:{default:!0}})}h(i);var l=u(i,2);R(l,{get result(){return n(f)}});var y=u(l,2),b=e=>{var t=z();M(a(t),{variant:`accent`,size:`small`,onclick:ie,get disabled(){return n(P)},children:(e,t)=>{m();var r=O();c(()=>_(r,n(P)?`Copied!`:`Copy to URL`)),k(e,r)},$$slots:{default:!0}}),m(2),h(t),k(e,t)};A(y,e=>{n(N)&&e(b)}),h(t),r(`submit`,i,ne),k(e,t)};A(J,e=>{n(F)||e(oe)});var Y=u(J,2),X=u(a(Y),2),Z=a(X);I(Z,{placeholder:`Enter encrypted text (base64)`,required:!0,get error(){return n(D)},get value(){return n(y)},set value(e){j(y,e,!0)}});var Q=u(Z,2);I(Q,{placeholder:`Enter key (base64)`,required:!0,get value(){return n(b)},set value(e){j(b,e,!0)}});var $=u(Q,2);I($,{placeholder:`Enter IV (base64)`,required:!0,get value(){return n(x)},set value(e){j(x,e,!0)}});var se=u($,2);{let e=p(()=>n(T)||!n(y).trim()||!n(b).trim()||!n(x).trim());M(se,{type:`submit`,variant:`secondary`,get disabled(){return n(e)},children:(e,t)=>{m();var r=O();c(()=>_(r,n(T)?`Decrypting...`:`Decrypt`)),k(e,r)},$$slots:{default:!0}})}h(X);var ce=u(X,2),le=e=>{var t=V(),r=u(a(t),2),i=a(r,!0);h(r),h(t),c(()=>_(i,n(C))),k(e,t)};A(ce,e=>{n(C)&&e(le)}),h(Y),r(`submit`,X,re),k(t,q),o()}export{U as component};